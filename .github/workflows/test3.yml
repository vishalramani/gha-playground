name: Test 3
 
on:
  workflow_dispatch:
    inputs:
      flavour-store:
        description: 'Choose store'
        required: true
        type: choice
        default: 'Google'
        options:
          - Google
          - Amazon
          - Huawei
      process-production:
        description: 'Process prod?'
        required: true
        type: choice
        default: 'true'
        options:
          - true
          - false
      process-beta:
        description: 'Process beta?'
        required: true
        type: choice
        default: 'true'
        options:
          - true
          - false
      process-production-debug:
        description: 'Process production debug?'
        required: true
        type: choice
        default: 'true'
        options:
          - true
          - false
      process-manual-release:
        description: 'Process manual  Release?'
        required: true
        type: choice
        default: 'true'
        options:
          - true
          - false
      process-debug:
        description: 'Process debug?'
        required: true
        type: choice
        default: 'true'
        options:
          - true
          - false
      google-play-upload:
        description: 'Is Google Play upload required?'
        required: true
        type: choice
        default: 'false'
        options:
          - true
          - false
 
jobs:
  build:
    runs-on: ubuntu-latest
 
    steps:
    - name: Checkout code
      uses: actions/checkout@v2

    - name: Defining a new Environment Variable
      run: |                          
        variant_apk=" \n"
         if [ ${{ inputs.process-production }} == 'true' ]; then
           echo ${{ steps.flavour-lower-case.outputs.lowercase }}Release=${{ inputs.process-production }},
         elif [ ${{ inputs.process-beta }} == 'true' ]; then
           echo ${{ steps.flavour-lower-case.outputs.lowercase }}Beta=${{ inputs.process-beta }},
         elif [ ${{ inputs.process-production-debug }} == 'true' ]; then
           echo ${{ steps.flavour-lower-case.outputs.lowercase }}ProdDebug=${{ inputs.process-production-debug }},
         elif [ ${{ inputs.process-manual-release }} == 'true' ]; then
           echo ${{ steps.flavour-lower-case.outputs.lowercase }}ManualRelease=${{ inputs.process-manual-release }},
         elif [ ${{ inputs.process-debug }} == 'true' ]; then
           echo ${{ steps.flavour-lower-case.outputs.lowercase }}Debug=${{ inputs.process-debug }},
         fi

        echo "MULTI_LINES_TEXT_ENV_VAR<<EOF" >> $GITHUB_ENV
        # here we can place the command that will generate multi-line text
        echo $variant_apk >> $GITHUB_ENV
        echo "EOF" >> $GITHUB_ENV
          
    - name: Using the previously defined environment variable
      run: |
        echo ${{ env.ONE_LINE_TEXT_ENV_VAR }}
    # - name: Building variants output for APK bundle (Manual Run)
    #   if: github.event_name == 'workflow_dispatch'
    #   id: variant-apks
    #   run: |
    #     variant_apk="{ \n
    #       ${{ steps.flavour-lower-case.outputs.lowercase }}Release=${{ inputs.process-production }}, \n
    #       ${{ steps.flavour-lower-case.outputs.lowercase }}Beta=${{ inputs.process-beta }}, \n
    #       ${{ steps.flavour-lower-case.outputs.lowercase }}ProdDebug=${{ inputs.process-production-debug }}, \n
    #       ${{ steps.flavour-lower-case.outputs.lowercase }}ManualRelease=${{ inputs.process-manual-release }}, \n
    #       ${{ steps.flavour-lower-case.outputs.lowercase }}Debug=${{ inputs.process-debug }} }"
    #     echo variant_apk >> $GITHUB_OUTPUT

    # - name: Create apk from bundle (Manual Run)
    #   if: github.event_name == 'workflow_dispatch'
    #   run: |
    #     echo ${{ steps.variant-apks.outputs.variant_apk }}
